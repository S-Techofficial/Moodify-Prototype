(this.webpackJsonpmoodify=this.webpackJsonpmoodify||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t),n.d(t,"useSongMethods",(function(){return E}));var a,c=n(16),r=n(11),i=n.n(r),o=n(20),s=n(64),l=n(8),u=n(2),d=n(0),j=n.n(d),p=n(108),b=n.p+"static/media/CompletedTick.997be658.svg",h=n.p+"static/media/DownloadIcon.99d55e74.svg",f=n(158),m=n(235),O=n(262),g=n(203),x=n(50),y=n(216),v=n(214),w=n(260),S=n(234),k=n(230),C=n(233),T=n(232),z=n(231),I=function(e){var t=e.isOpen,n=e.handleCancel,a=e.handleDelete,c=Object(d.useState)(!1),r=Object(l.a)(c,2),i=r[0],o=r[1];return j.a.useEffect((function(){console.log(i)}),[i]),Object(u.jsx)("div",{children:Object(u.jsxs)(k.a,{style:{zIndex:1500},open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(u.jsx)(z.a,{id:"alert-dialog-title",children:"Delete this song from your device ?"}),Object(u.jsx)(T.a,{children:Object(u.jsx)(v.a,{control:Object(u.jsx)(w.a,{color:"secondary",checked:i,onChange:function(e){return o(e.target.checked)},value:"checkBox"}),label:"Don't ask again"})}),Object(u.jsxs)(C.a,{children:[Object(u.jsx)(S.a,{onClick:n,color:"primary",children:"Cancel"}),Object(u.jsx)(S.a,{onClick:function(){return a(i)},color:"primary",children:"Delete"})]})]})})},D=n(19),P=n(69),R=n(30),E=function(e){var t=Object(d.useContext)(D.a),n=Object(l.a)(t,2);Object(s.a)(n[0]);var c=n[1],r=j.a.useCallback((function(e){c({type:"setSnackbarMsg",snippet:e})}),[c]),p=Object(d.useState)(!1),b=Object(l.a)(p,2),h=b[0],f=b[1],m=Object(d.useState)(null),O=Object(l.a)(m,2),g=O[0],x=O[1];Object(d.useEffect)((function(){var e="true"===localStorage.getItem("dontAskPopup");x(e)}),[]);var y=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/song",{params:{id:t}});case 2:return n=e.sent,e.next=5,Object(R.c)(t,n.data);case 5:a=e.sent,r("Song Downloaded"),console.log("song status",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.b)(a);case 2:e.sent,f(!1),r("Deleted Successfully"),console.log(a,t),t&&(localStorage.setItem("dontAskPopup",!0),x(!0));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=g?null:Object(u.jsx)(I,{isOpen:h,handleCancel:function(){return f(!1)},handleDelete:v});return{handleDownload:y,handleRemoveSong:function(e){console.log("handle remove dude"),a=e,g?v():f(!0)},deleteTheSong:v,dontAskPopup:g,setDeleteDialogState:f,deleteDialogState:h,deleteDialogComponent:w}};t.default=function(e){var t=e.songs,n=Object(d.useContext)(D.a),a=Object(l.a)(n,2);Object(s.a)(a[0]);var r=a[1],i=Object(d.useState)(window.innerHeight),o=Object(l.a)(i,2),v=(o[0],o[1]),w=function(e){var t;t={id:e.videoId,audio:e.audio,thumbnail:e.thumbnail,title:e.title,channelTitle:e.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(e.videoId,"/maxresdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(e.videoId,"/sddefault.jpg")},r({type:"setCurrentVideoSnippet",snippet:t})},S=E(),k=S.handleDownload,C=S.handleRemoveSong,T=S.deleteDialogComponent,z=function(e){return"downloading"===e.downloadState?(console.log(e.downloadState),"downloading-animation"):""};Object(d.useEffect)((function(){v(window.innerHeight)}));var I=t.map((function(e,t){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(f.a,{alignItems:"flex-start",button:!0,onClick:function(){return w(e)},children:[Object(u.jsx)(m.a,{children:Object(u.jsx)(O.a,{className:"searchThumb",style:{width:"60px",height:"60px",marginRight:"15px"},alt:e.title,src:"https://img.youtube.com/vi/".concat(e.videoId,"/default.jpg")})}),Object(u.jsx)(g.a,{primary:e.title,secondary:Object(u.jsx)(j.a.Fragment,{children:Object(u.jsx)(x.a,{component:"span",variant:"body2",color:"textPrimary",children:e.channelTitle})})})]}),Object(u.jsx)("div",{className:"download-container",onClick:function(){return e.audio?C(e.videoId):k(e.videoId)},children:Object(u.jsx)("div",{className:"badge-container",children:Object(u.jsx)("img",{className:z(e),src:e.audio?b:h,alt:"downloading icon"})})})]})})),P=j.a.forwardRef((function(e,t){return Object(u.jsxs)("div",{ref:t,style:Object(c.a)(Object(c.a)({},e.style),{},{maxWidth:"1000px",left:"50%",transform:"translateX(-50%)"}),children:[I[e.index],Object(u.jsx)(y.a,{})]})}));return Object(u.jsxs)(u.Fragment,{children:[T,Object(u.jsx)(p.a,{height:window.innerHeight-100,itemCount:t.length,width:window.innerWidth,children:P})]})}},113:function(e,t,n){},150:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),i=n(17),o=n.n(i),s=(n(127),n(19)),l=n(8),u=n(34),d=n(23),j=n(16),p=n(11),b=n.n(p),h=n(20),f=n(205),m=n(206),O=n(160),g=n(261),x=n(208),y=n(207),v=n(43),w=n.n(v),S=n(99),k=n.n(S),C=w.a.create({baseURL:"https://suggestqueries.google.com/complete/search?",adapter:k.a,params:{hl:"en",ds:"yt",client:"youtube"}}),T=n(158),z=n(201),I=n(203),D=n(204),P=n(202),R=function(e){var t=e.results,n=e.onSearchSelect,c=[];return t&&(c=t.map((function(e,t){return Object(a.jsxs)(T.a,{onClick:function(){return n(e[0])},button:!0,children:[Object(a.jsx)(z.a,{style:{paddingLeft:"16px"},children:Object(a.jsx)(P.a,{})}),Object(a.jsx)(I.a,{primary:e[0]})]},t)}))),Object(a.jsx)(D.a,{children:c})},E=n(63),N=Object(d.f)((function(e){var t=e.history,n=e.location,r=new URLSearchParams(n.search),i=Object(c.useContext)(s.a),o=Object(l.a)(i,2),u=o[0].searchState,d=o[1],j=Object(c.useCallback)((function(e){d({type:"setSearchState",snippet:e})}),[d]),p=Object(c.useCallback)((function(e){console.log(e),d({type:"setSearchResult",snippet:e})}),[d]),v=Object(c.useState)(""),w=Object(l.a)(v,2),S=w[0],k=w[1],T=Object(c.useState)(""),z=Object(l.a)(T,2),I=z[0],D=z[1],P=Object(c.useState)(null),N=Object(l.a)(P,2),M=N[0],L=N[1],A=Object(c.useState)(!0),F=Object(l.a)(A,2),V=F[0],U=F[1];console.log("search box re rendered");var H=function(e){k(e),L(e),j("searching"),t.push({pathname:"/search",search:"?q=".concat(e)})},W=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get("",{params:{q:S}});case 2:t=e.sent,D(t.data[1]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){M&&""!==M&&function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/search",{params:{q:t,maxResults:15}});case 2:n=e.sent,p(n.data.items),j("completed");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(M)}),[M,p,j]),Object(c.useEffect)((function(){console.log("search state",u)}),[u]),Object(c.useEffect)((function(){var e=r.get("q");e&&(L(e),k(e),j("searching"),console.log("changing query to",e))}),[j,L]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(O.a,{onClick:function(){j("home"),"/search"===t.location.pathname&&t.goBack()},color:"inherit","aria-label":"Menu",children:Object(a.jsx)(y.a,{})}),Object(a.jsx)("form",{style:{width:"100%"},onSubmit:function(e){return function(e){e.preventDefault(),console.log(e.target.lastChild),e.target.lastChild.lastChild.blur(),j("searching"),L(S),t.push({pathname:"/search",search:"?q=".concat(S)})}(e)},children:Object(a.jsx)(g.a,{fullWidth:!0,placeholder:"Search...",autoFocus:!0,style:{color:"#fff",paddingLeft:"16px"},value:S,onChange:function(e){k(e.target.value),W()},onClick:function(){j("clicked"),U(!0)}})}),Object(a.jsx)(x.a,{className:"searchPopper",open:V,anchorEl:document.getElementById("navbar"),popperOptions:{modifiers:{preventOverflow:{padding:0}}},placement:"bottom",children:function(){switch(u){case"searching":return Object(a.jsx)(f.a,{style:{height:"100vh"},container:!0,justify:"center",alignItems:"center",children:Object(a.jsx)(m.a,{})});case"clicked":return Object(a.jsx)(R,{results:I,onSearchSelect:H});case"completed":U(!1)}console.log("Function ran")}})]})})),M=n(210),L=n(211),A=n(212),F=n(209);function V(e){var t=e.children,n=Object(F.a)();return Object(a.jsx)(M.a,{appear:!1,direction:"down",in:!n,children:t})}var U=Object(d.f)((function(e){var t=Object(c.useContext)(s.a),n=Object(l.a)(t,2),i=n[0].searchState,o=n[1],u=r.a.useCallback((function(e){console.log(e),o({type:"setSearchState",snippet:e})}),[o]);return r.a.useEffect((function(){var t=function(){var t=e.history.location.pathname;u("/search"===t?"searching":"home"),console.log("history change detected in app bar")};t();e.history.listen((function(e){t()}))}),[u,e.history]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(V,Object(j.a)(Object(j.a)({},e),{},{children:Object(a.jsx)(L.a,{id:"navbar",position:"sticky",children:Object(a.jsx)(A.a,{style:{justifyContent:"space-between"},children:"home"===i?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(O.a,{color:"inherit","aria-label":"Menu",onClick:function(){return e=!0,console.log(e),void o({type:"setMenuOpen",snippet:e});var e},children:Object(a.jsx)("h1",{className:"simpleAppBar",style:{fontFamily:"'Pacifico', cursive",margin:0,padding:0,fontSize:"24px",height:"45px",width:"45px"},children:"M"})}),Object(a.jsx)(O.a,{onClick:function(){return u("clicked")},color:"inherit","aria-label":"Search",children:Object(a.jsx)(P.a,{})})]}):Object(a.jsx)(N,{})})})}))})})),H=n(259),W=n(216),B=n(218),q=n(217),Y=n(213),K=n(214),J=n(215),_=(n(150),function(){var e=Object(c.useContext)(s.a),t=Object(l.a)(e,2),n=t[0],r=n.menuOpen,i=n.themeSelectValue,o=t[1],d=function(e){o({type:"setMenuOpen",snippet:e})},j=Object(c.useCallback)((function(e){o({type:"setThemeSelectValue",snippet:e})}),[o]),p=Object(c.useState)(!1),b=Object(l.a)(p,2),h=b[0],f=b[1];Object(c.useEffect)((function(){f("Dark"===i)}),[i]);var m=function(e){j(e),localStorage.setItem("selectedTheme",e)};return Object(a.jsx)(H.a,{open:r,onClose:function(){return d(!1)},onOpen:function(){return d(!0)},children:Object(a.jsxs)("div",{style:{width:"300px"},children:[Object(a.jsx)("div",{style:{margin:"35px",position:"relative",width:"30px",height:"30px",display:"flex"},children:Object(a.jsxs)(Y.a,{style:{justifyContent:"space-evenly"},children:[Object(a.jsx)("p",{style:{color:"#fff",margin:"16px"},children:"Light"}),Object(a.jsx)(K.a,{control:Object(a.jsx)(J.a,{checked:h,onChange:function(){h?(m("Default"),f(!0)):(m("Dark"),f(!1))}})}),Object(a.jsx)("p",{style:{color:"#000"},children:"Dark"})]})}),Object(a.jsx)(W.a,{}),Object(a.jsxs)(D.a,{component:"nav",className:"pinkLists",onClick:function(){return d(!1)},children:[Object(a.jsxs)(T.a,{button:!0,component:u.b,to:"/settings",children:[Object(a.jsx)(z.a,{children:Object(a.jsx)(q.a,{})}),Object(a.jsx)(I.a,{primary:"Settings"})]}),Object(a.jsxs)(T.a,{button:!0,component:B.a,target:"blank",href:"https://github.com/S-Techofficial/Moodify-Prototype",children:[Object(a.jsx)(z.a,{children:Object(a.jsx)("svg",{width:"24","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"github",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",fill:"#e91e63",children:Object(a.jsx)("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})}),Object(a.jsx)(I.a,{primary:"Github"})]})]})]})})}),G=n(65),X=n(5),$=n(258),Q=n(250),Z=n(251),ee=n(252),te=n(240),ne=n(253),ae=n(30),ce=n(256),re=n(257),ie=n(219),oe=n(220),se=n(50),le=n(221),ue=function(){var e=Object(c.useContext)(s.a),t=Object(l.a)(e,2),n=t[0].themeSelectValue,r=t[1],i=Object(c.useCallback)((function(e){r({type:"setThemeSelectValue",snippet:e})}),[r]);Object(c.useEffect)((function(){console.log(n)}),[n]);var o=Object(a.jsx)(ce.a,{m:1,children:Object(a.jsxs)(re.a,{value:n,onChange:function(e){i(e.target.value),localStorage.setItem("selectedTheme",e.target.value)},displayEmpty:!0,name:"age",children:[Object(a.jsx)(ie.a,{value:"Default",children:"Default"}),Object(a.jsx)(ie.a,{value:"Dark",children:"Dark"}),Object(a.jsx)(ie.a,{value:"Auto",children:"Auto"})]})});return Object(a.jsxs)(oe.a,{children:[Object(a.jsx)("br",{}),Object(a.jsx)(se.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Settings"}),Object(a.jsx)(le.a,{component:"fieldset",children:Object(a.jsx)(Y.a,{row:!0,children:Object(a.jsx)(K.a,{labelPlacement:"start",label:"Select Theme ",value:"top",control:o})})})]})},de=n(68),je=n(222),pe=n(223),be=n(224),he=n(225),fe=function(e){var t=e.player,n=e.audioState,c=e.minimized;return Object(a.jsx)(O.a,{size:"small",color:c?"secondary":"primary","aria-label":"Pause",onClick:function(e){"playing"===n?t.pause():"paused"===n&&t.play(),e.stopPropagation()},disableFocusRipple:!0,disableRipple:!0,children:"playing"===n?c?Object(a.jsx)(je.a,{style:{fontSize:"3em",opacity:".8"}}):Object(a.jsx)(pe.a,{style:{fontSize:"4em"},color:"primary"}):"paused"===n||"loaded"===n?c?Object(a.jsx)(be.a,{style:{fontSize:"3em",opacity:".8"}}):Object(a.jsx)(he.a,{style:{fontSize:"4em"},color:"primary"}):"loading"===n?Object(a.jsx)(m.a,{}):void 0})},me=n(226),Oe=function(e){var t=e.onPlayNext;return Object(a.jsx)(O.a,{color:"primary","aria-label":"Next",onClick:t,children:Object(a.jsx)(me.a,{fontSize:"large"})})},ge=n(227),xe=function(e){var t=e.playPrevious;return Object(a.jsx)(O.a,{color:"primary","aria-label":"Pause",onClick:t,children:Object(a.jsx)(ge.a,{fontSize:"large"})})},ye=n(262),ve=n(228),we=n.p+"static/media/dottedCircle.02a1e209.svg",Se={time:0,target:null};var ke,Ce=function(e){var t=e.data,n=e.rating,i=e.audioEl,o=Object(de.a)({onSwipedUp:function(e){h()}}),s=Object(c.useState)({transform:"scale(0)"}),u=Object(l.a)(s,2),d=u[0],p=u[1],b=Object(c.useCallback)((function(){p({transform:"scale(0)"}),setTimeout((function(){p({transform:"scale(1)"})}),300)}),[p]),h=Object(c.useCallback)((function(){Object(ae.g)(t.id,"disliked"),p({transform:"scale(0)"}),setTimeout((function(){p({transform:"scale(1)",color:"#2d3436"})}),300)}),[p,t.id]);r.a.useEffect((function(){"liked"===n?b():"disliked"===n?h():p({transform:"scale(0)"})}),[n,b,h,p]);var m={background:"url(".concat(we,") no-repeat"),padding:"18px",position:"relative",zIndex:"1"};return Object(a.jsxs)(f.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{marginTop:"40px"},onClick:function(e){(function(e){var t={time:(new Date).getTime(),target:e.currentTarget},n=t.target===Se.target&&t.time-Se.time<300;return Se=t,n})(e)&&(b(),Object(ae.g)(t.id,"liked",i))},children:[Object(a.jsxs)(G.a.div,Object(j.a)(Object(j.a)({className:"box",drag:!0,dragElastic:!0,dragTransition:{bounceStiffness:100,bounceDamping:10},dragConstraints:{left:0,right:0,top:0,bottom:0},style:m},o),{},{children:[Object(a.jsx)(ve.a,{className:"songHeart left",style:d}),Object(a.jsx)(ve.a,{className:"songHeart right",style:d}),Object(a.jsx)(ye.a,{className:"searchThumb",style:{width:"215px",height:"215px",boxShadow:"#0000008c 1px 3px 8px"},alt:"video thumbnail",src:t.thumbnail?window.URL.createObjectURL(t.thumbnail):t.maxThumbnail,imgProps:{onLoad:function(e){return function(e){e.target.naturalWidth<400&&(e.target.src=t.sdThumbnail)}(e)}}})]})),Object(a.jsx)("br",{}),Object(a.jsx)(se.a,{color:"secondary",variant:"h5",className:"musicArtTitle",align:"center",children:function(e){var t=new RegExp(e.channelTitle+" - | : ","g");return e.title.replace(t,"")}(t)}),Object(a.jsx)(se.a,{color:"secondary",variant:"subtitle1",children:t.channelTitle}),Object(a.jsx)("br",{})]})},Te=n(263),ze=Object(X.a)({root:{height:6},thumb:{height:16,width:16,marginTop:-5.3,marginLeft:-8,"&::before":{content:"''",height:"inherit",width:"inherit",position:"absolute",transform:"scale(1.6)",borderRadius:"50px",border:"1px solid"}},track:{height:6,borderRadius:4},rail:{height:6,borderRadius:4}})(Te.a),Ie=Object(X.a)({root:{height:4,position:"relative",bottom:"16px",color:"#FFFDFD",padding:0},thumb:{display:"none"},track:{height:4,borderRadius:0},rail:{height:4,borderRadius:0}})(Te.a),De=function(e){var t=Math.floor(e/60),n=Math.ceil(e-60*t);return n<10&&(n="0".concat(n)),"".concat(t,":").concat(n)},Pe=function(e){var t=e.audioState,n=e.player,r=e.minimized,i=Object(c.useState)(50),o=Object(l.a)(i,2),s=(o[0],o[1],Object(c.useState)(0)),u=Object(l.a)(s,2),d=u[0],j=u[1];Object(c.useEffect)((function(){var e;return n&&j(n.currentTime),"playing"===t?e=setInterval((function(){j(n.currentTime),console.log()}),800):clearInterval(e),function(){return clearInterval(e)}}),[t,n]);return r?Object(a.jsx)(Ie,{value:d,max:n?n.duration:0}):Object(a.jsxs)("div",{style:{margin:"0 auto",width:"90%"},children:[Object(a.jsxs)(f.a,{container:!0,direction:"row",justify:"space-between",children:[Object(a.jsx)(se.a,{variant:"body1",color:"primary",children:De(d)}),Object(a.jsx)(se.a,{variant:"body1",color:"primary",children:n?n.duration?De(n.duration):"0:00":0})]}),Object(a.jsx)(ze,{value:d,onChange:function(e,t){n.currentTime=t,j(t)},max:n?n.duration:0})]})},Re=n(238),Ee=n(239),Ne=n(241),Me=n(229),Le=function(e){var t=e.player,n=(e.setPlayerState,Object(c.useState)(100)),r=Object(l.a)(n,2),i=r[0],o=r[1];return Object(a.jsxs)(f.a,{container:!0,spacing:1,style:{maxWidth:"200px"},children:[Object(a.jsx)(f.a,{item:!0,children:Object(a.jsx)(Me.a,{color:"primary"})}),Object(a.jsx)(f.a,{item:!0,xs:3,children:Object(a.jsx)(Te.a,{value:i,onChange:function(e,n){o(n),t.volume=n/100}})})]})},Ae=n(106),Fe=n(230),Ve=n(233),Ue=n(234),He=n(236),We=n(237),Be=n(104);n(154);var qe,Ye=function(e){var t=e.player,n=Object(c.useState)(20),r=Object(l.a)(n,2),i=r[0],o=r[1],s=Object(c.useState)(!1),u=Object(l.a)(s,2),d=u[0],j=u[1],p=Object(c.useState)(!1),b=Object(l.a)(p,2),h=b[0],f=b[1],m=Object(c.useState)(!1),O=Object(l.a)(m,2),g=O[0],x=O[1],y=function(e){console.log("timer has been set with time",e),clearTimeout(ke),x(!0),ke=setTimeout((function(){t.pause()}),60*e*1e3)};return Object(c.useEffect)((function(){var e=function(){var e=localStorage.getItem("sleepTimerSettings");return JSON.parse(e)}();e&&(o(e.time),f(e.alwaysOn)),e&&e.alwaysOn&&(console.log(e),y(e.time)),console.log(e)}),[]),Object(a.jsxs)(a.Fragment,{children:[g?Object(a.jsx)(He.a,{color:"primary",onClick:function(){return j(!0)}}):Object(a.jsx)(We.a,{color:"primary",onClick:function(){return j(!0)}}),Object(a.jsxs)(Fe.a,{style:{zIndex:1400},open:d,onClose:function(){return j(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(se.a,{variant:"h5",color:"primary",align:"center",style:{marginTop:"10px"},children:"Pause Music After"}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{className:"textContainer",children:[i,Object(a.jsx)("div",{className:"minute",children:"MINUTES"})]}),Object(a.jsx)(Be.CircleSlider,{value:i,stepSize:5,onChange:function(e){return o(e)},size:300,max:120,gradientColorFrom:"#6A82FB",gradientColorTo:"#FC5C7D",knobRadius:25,progressWidth:30,circleWidth:30})]}),Object(a.jsxs)(Ve.a,{children:[Object(a.jsx)(K.a,{value:"Always On",control:Object(a.jsx)(J.a,{checked:h,onChange:function(e){return f(e.target.checked)},value:"checked always on",color:"primary"}),label:"ALWAYS",labelPlacement:"end",style:{color:"#e91e63"}}),Object(a.jsx)(Ue.a,{color:"primary",onClick:function(){localStorage.removeItem("sleepTimerSettings"),x(!1),j(!1)},children:"Remove"}),Object(a.jsx)(Ue.a,{color:"primary",onClick:function(){!function(e,t){var n=JSON.stringify({time:e,alwaysOn:t});localStorage.setItem("sleepTimerSettings",n)}(i,h),j(!1),y(i)},children:"Set"})]})]})]})},Ke=Object(X.a)({root:{height:2,width:"70%",margin:"0 auto",transform:"translateY(-10px)"}})(Re.a),Je=function(e){var t=e.song,n=e.player,r=e.setPlayerState,i=e.history,o=Object(c.useContext)(s.a).snackbarMsg,u=Object(c.useState)(!1),d=Object(l.a)(u,2),j=d[0],p=d[1],b=Object(c.useState)(!1),h=Object(l.a)(b,2),m=h[0],O=h[1],g=Object(Ae.useSongMethods)(),x=g.handleDownload,y=g.handleRemoveSong,v=g.deleteDialogComponent;Object(c.useEffect)((function(){("Song Downloaded"===o||t.audio)&&(p(!0),O(!1))}),[o]);return Object(a.jsxs)(f.a,{container:!0,justify:"space-between",direction:"row",style:{padding:" 0 10px",marginTop:"10px",position:"absolute",top:"0"},children:[Object(a.jsx)(Le,{player:n}),v,Object(a.jsx)(Ye,{player:n}),Object(a.jsxs)("div",{children:[j?Object(a.jsx)(Ee.a,{color:"primary",onClick:function(){return y(t.id)}}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(te.a,{color:"primary",onClick:function(){x(t.id),O(!0)}})}),m?Object(a.jsx)(Ke,{color:"primary"}):null]}),Object(a.jsx)(Ne.a,{onClick:function(){i.goBack(),r("minimized")},color:"primary",fontSize:"large",style:{transform:"translateY(-7px)"}})]})},_e=n(242),Ge=(n(155),function(e){var t=e.playPause,n=e.data,c=e.playNext,r=e.emptyPlayer;return Object(a.jsx)("div",{className:"mainContainer",children:Object(a.jsxs)("div",{className:"overflow-hidden",children:[Object(a.jsxs)("div",{className:"details",children:[Object(a.jsx)(se.a,{variant:"body1",children:n.title}),Object(a.jsx)(se.a,{variant:"body2",children:n.channelTitle})]}),Object(a.jsxs)("div",{className:"buttons",children:[Object(a.jsx)(me.a,{onClick:c}),Object(a.jsx)(_e.a,{onClick:r})]}),Object(a.jsx)("div",{className:"miniArtContainer",children:Object(a.jsxs)("div",{className:"mainArt",children:[Object(a.jsx)("img",{className:"miniArtImg",src:n.thumbnail?window.URL.createObjectURL(n.thumbnail):n.sdThumbnail,alt:"music art"}),Object(a.jsx)(fe,{player:t.player,minimized:t.minimized,audioState:t.audioState})]})})]})})}),Xe=n(64),$e=n(107),Qe=n(243),Ze=n(244),et=n(245),tt=n(246),nt=n(247),at=n(248),ct=n(249),rt=function(e){var t=e.toggleMaxPlaylist,n=e.setPlaylist,r=e.playerState,i=e.relatedVideos,o=e.setRelatedVideos,u=e.setIsRepeatOn,d=e.isRepeatOn,j=Object(c.useContext)(s.a),p=Object(l.a)(j,2);Object(Xe.a)(p[0]);var b=p[1],h={type:"spring",damping:20,stiffness:300},m=function(e){var t;t={id:e.id.videoId,title:e.snippet.title,channelTitle:e.snippet.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/maxresdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/sddefault.jpg")},b({type:"setCurrentVideoSnippet",snippet:t}),n()};if(!(i.length>1))return Object(a.jsx)(Re.a,{});qe=i.map((function(e){return Object(a.jsx)(G.a.li,{positionTransition:h,children:Object(a.jsxs)(T.a,{button:!0,onClick:function(){return m(e)},children:[Object(a.jsx)(z.a,{children:Object(a.jsx)(Qe.a,{style:{color:"#fff"}})}),Object(a.jsx)(I.a,{primary:e.snippet.title.slice(0,40),secondary:e.snippet.channelTitle.slice(0,40)})]})},e.id.videoId)}));return Object(a.jsxs)("div",{className:"RelatedVideoContainer",children:[Object(a.jsxs)(f.a,{className:"playlistHeader",container:!0,direction:"row",alignItems:"center",justify:"space-between",children:[Object(a.jsx)(tt.a,{}),Object(a.jsx)(se.a,{variant:"h6",children:"Coming Next"}),Object(a.jsx)(nt.a,{onClick:function(){var e;o((e=i).reduce((function(e,t,n){var a=Math.floor(Math.random()*e.length),c=e[n];return e[n]=e[a],e[a]=c,e}),Object($e.a)(e)))}}),d?Object(a.jsx)(at.a,{onClick:u}):Object(a.jsx)(ct.a,{onClick:u}),"playlist"===r?Object(a.jsx)(Ze.a,{onClick:t}):Object(a.jsx)(et.a,{onClick:t})]}),Object(a.jsx)(D.a,{dense:!0,children:qe})]})},it=n(69),ot=localStorage.getItem("country_code");ot||function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("https://ipapi.co/json/",{mode:"no-cors"});case 2:t=e.sent,localStorage.setItem("country_code",t.data.country);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();n(113);var st,lt,ut=function(e){var t=e.location,n=e.history,r=new URLSearchParams(t.search),i=Object(c.useContext)(s.a),o=Object(l.a)(i,2),u=o[0],d=u.currentVideoSnippet,p=u.themeSelectValue,m=o[1],O=function(e){m({type:"setCurrentVideoSnippet",snippet:e})},g=Object(c.useState)([]),x=Object(l.a)(g,2),y=x[0],v=x[1],w=Object(c.useState)(!1),S=Object(l.a)(w,2),k=S[0],C=S[1],T=Object(c.useState)(null),z=Object(l.a)(T,2),I=z[0],D=z[1],P=Object(c.useState)(null),R=Object(l.a)(P,2),N=R[0],M=R[1],L=Object(c.useState)(!0),A=Object(l.a)(L,2),F=A[0],V=A[1],U=Object(c.useState)(!1),H=Object(l.a)(U,2),W=H[0],B=H[1],q=Object(c.useState)("none"),Y=Object(l.a)(q,2),K=Y[0],J=Y[1],_=Object(c.useState)(!1),G=Object(l.a)(_,2),X=G[0],$=G[1],Q=Object(c.useState)(null),Z=Object(l.a)(Q,2),ee=(Z[0],Z[1],document.querySelector("body")),te=Object(c.useRef)(),ne=te.current,ce=function(){"mediaSession"in navigator&&(console.log("navigator setupped"),navigator.mediaSession.metadata=new window.MediaMetadata({title:d.title,artist:d.channelTitle,artwork:[{src:d.sdThumbnail,sizes:"512x512",type:"image/png"}]}),navigator.mediaSession.setActionHandler("play",(function(){re()})),navigator.mediaSession.setActionHandler("pause",(function(){te.current.pause()})),navigator.mediaSession.setActionHandler("previoustrack",(function(){le()})),navigator.mediaSession.setActionHandler("nexttrack",(function(){se()})))},re=function(){te.current.play().then((function(e){console.log("audio played auto"),ce()})).catch((function(e){console.log("playback prevented"),D("paused")}))};Object(c.useEffect)((function(){console.log("state changed triggedred");var e=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"playlist"===N||X||(M("maximized"),console.log("maximizing here yar and state is",N)),setTimeout((function(){$(!1)}),200),D("loading"),e.next=5,it.a.get("/song",{params:{id:t}});case 5:n=e.sent,te.current.src=n.data,re();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(d.audio?(console.log("yes its downloaded we will play from local file"),M("maximized"),D("loading"),te.current.src=window.URL.createObjectURL(d.audio),re()):d.id&&e(d.id),d.id){var a=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/search",{params:{relatedToVideoId:d.id,maxResults:10}});case 2:t=e.sent,v(t.data.items);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();X||(k?(n.replace("/play?id=".concat(d.id)),C(!1)):("/play"!==t.pathname&&n.push("/play?id=".concat(d.id)),a())),console.log(d)}J("none")}),[d,C]),Object(c.useEffect)((function(){st=y,console.log("related",y)}),[y]),Object(c.useEffect)((function(){console.log("isnext state",X)}),[X]);var ie=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it.a.get("/song",{params:{id:t}});case 2:n=e.sent,te.current.src=n.data,re();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){O({id:e.id.videoId,title:e.snippet.title,channelTitle:e.snippet.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/hqdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/sddefault.jpg")}),document.hidden&&ie(e.id.videoId)},se=function(){C(!0),console.log("play next related videos",y);var e,t=st.findIndex((function(e){return e.id.videoId===d.id}));console.log("the current index is",t),console.log("hey we will play next song"),e=st[t+1],oe(e)},le=function(){if(C(!0),ne.currentTime>5)ne.currentTime=0;else{var e,t=st.findIndex((function(e){return e.id.videoId===d.id}));-1!==t?(e=st[t-1],oe(e)):ne.currentTime=0}},ue={position:"fixed",right:0,bottom:0,background:"#fff",width:"100%",height:"100%",zIndex:1400,display:"inline block",transition:"all .3s ease"};"minimized"===N&&(ue.transform="translateY(calc(100% - 106px))",ue.zIndex=0,ue.background="Dark"===p?"#333":"#e91e63",ee.style.overflow="auto"),"maximized"===N&&(ee.style.overflow="hidden","Dark"===p&&(ue.background="#333")),"playlist"===N&&(ue.transform="translateY(-418px)");var je=function(){"minimized"===N&&(M("maximized"),V(!0),n.push({pathname:"/play",search:"?id=".concat(d.id),state:{modal:!0}}))},pe=function(){M("playlist"===N?"maximized":"playlist"),console.log("Maximize the playlist")},be=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ae.i)(d);case 2:t=e.sent,J(t),console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=0,me=Object(c.useRef)(null),ge=Object(de.a)({onSwipedDown:function(e){M("minimized"),n.goBack()},onSwiping:function(e){0===he&&(he=e.event.changedTouches[0].screenY);var t=e.event.changedTouches[0].screenY,n=Math.round(t-he);n<1&&(n=0);var a=me.current.style;a.transform="translateY(".concat(n,"px)"),a.transition="none"},onSwiped:function(e){he=0,me.current.style=""},onSwipedUp:function(e){"minimized"===N&&M("maximized")},onSwipedRight:function(e){var t=setTimeout((function(){clearTimeout(t),se()}),250)},onSwipedLeft:function(e){var t=setTimeout((function(){clearTimeout(t),le()}),250)}}),ye=Object(de.a)({onSwipedUp:function(e){je()}});Object(c.useEffect)((function(){"/play"!==t.pathname||d.id||(console.log("history is in play fetching song"),ve(r.get("id")));n.listen((function(e){"/play"===e.pathname?"REPLACE"!==n.action&&(M("maximized"),console.log("set player state to maximized")):(M("minimized"),console.log("set player state to minimized")),console.log(n)}))}),[n]),Object(c.useEffect)((function(){console.log(N)}),[N]);var ve=function(e){E.a.get("videos",{params:{id:e}}).then((function(e){var t=e.data.items[0];console.log(d),O({id:t.id,title:t.snippet.title,channelTitle:t.snippet.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(t.id,"/maxresdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(t.id,"/sddefault.jpg")})}))};return d.id?Object(a.jsxs)("div",{ref:me,onClick:je,className:"mediaPlayerContainer "+("minimized"===N?"playerMinimized":"playlist"===N?"playerPlaylist":void 0),children:[function(){if("maximized"===N||"playlist"===N)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(f.a,{container:!0,direction:"column",className:"main-player-inner",style:{height:" calc(100vh - 46px)",justifyContent:"space-evenly"},children:[Object(a.jsx)(Je,{song:d,player:ne,setPlayerState:M,history:n}),Object(a.jsx)("div",Object(j.a)(Object(j.a)({},ge),{},{className:"musicArtContainer",children:Object(a.jsx)(Ce,{data:d,rating:K,audioEl:ne})})),Object(a.jsx)(Pe,{audioState:I,player:ne}),Object(a.jsxs)(f.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center",style:{maxWidth:"290px",height:"80px",margin:"0 auto"},children:[Object(a.jsx)(xe,{playPrevious:le}),Object(a.jsx)(fe,{player:ne,audioState:I}),Object(a.jsx)(Oe,{onPlayNext:se})]})]}),Object(a.jsx)(rt,{toggleMaxPlaylist:pe,setPlaylist:function(){return C(!0)},playerState:N,relatedVideos:y,setRelatedVideos:function(e){return v(e)},isRepeatOn:W,setIsRepeatOn:function(){B(!W)}})]})}(),function(){if("minimized"===N&&d.id)return Object(a.jsxs)("div",Object(j.a)(Object(j.a)({},ye),{},{children:[Object(a.jsx)(Ge,{playPause:{player:ne,minimized:F,audioState:I},playNext:function(e){e.stopPropagation(),$(!0),se()},data:d,emptyPlayer:function(e){e.stopPropagation(),O([])}}),Object(a.jsx)(Pe,{audioState:I,player:ne,minimized:F})]}))}(),Object(a.jsx)("audio",{onLoadStart:function(){D("loading")},id:"audio-element",onLoadedData:be,onPlay:function(){return D("playing")},onPlaying:function(){return D("playing")},onPause:function(){return D("paused")},onEnded:function(){W?(te.current.currentTime=0,re()):se()},autoPlay:!0,ref:te})]}):null},dt=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,272))})),jt=Object(c.lazy)((function(){return Promise.resolve().then(n.bind(null,106))})),pt=Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,269))})),bt=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,271))})),ht=Object(X.a)({root:{background:"#3f51b5",position:"fixed",bottom:"0",padding:0,width:"100%",zIndex:1300},indicator:{display:"none"},labelIcon:{margin:0}})($.a),ft=Object(X.a)({root:{color:"#00b0ff",fontSize:".75rem",margin:0,"&:hover":{color:"#ffffffed",opacity:1},"&$selected":{color:"#fff"},"&:focus":{color:"#FFFFFF"}},selected:{}})(Q.a),mt=void 0;window.addEventListener("beforeinstallprompt",(function(e){mt=e}));var Ot=Object(d.f)((function(e){var t=e.history,n=e.location,r=Object(c.useContext)(s.a),i=Object(l.a)(r,1)[0],o=i.currentVideoSnippet,p=i.searchResult;console.log(o);var O=Object(c.useState)([]),g=Object(l.a)(O,2),x=g[0],y=g[1],v=Object(c.useState)([]),w=Object(l.a)(v,2),S=w[0],k=w[1],C=Object(c.useState)([]),T=Object(l.a)(C,2),z=T[0],I=T[1],D=Object(c.useState)(0),P=Object(l.a)(D,2),R=P[0],E=P[1],N=Object(c.useState)(0),M=Object(l.a)(N,2),L=M[0],A=M[1],F=Object(c.useState)(null),V=Object(l.a)(F,2),U=V[0],H=V[1],W=Object(a.jsx)(f.a,{style:{height:"100vh"},container:!0,justify:"center",alignItems:"center",children:Object(a.jsx)(m.a,{})});var B=Object(c.useCallback)(Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=R,e.next=1===e.t0?3:2===e.t0?9:3===e.t0?15:21;break;case 3:return e.t1=k,e.next=6,Object(ae.f)();case 6:return e.t2=e.sent,(0,e.t1)(e.t2),e.abrupt("break",22);case 9:return e.t3=I,e.next=12,Object(ae.d)();case 12:return e.t4=e.sent,(0,e.t3)(e.t4),e.abrupt("break",22);case 15:return e.t5=y,e.next=18,Object(ae.e)();case 18:return e.t6=e.sent,(0,e.t5)(e.t6),e.abrupt("break",22);case 21:return e.abrupt("break",22);case 22:case"end":return e.stop()}}),e)}))),[R]);Object(c.useEffect)((function(){B()}),[R,B]),Object(c.useEffect)((function(){B(),console.log("fetching the songs")}),[L,B]),Object(c.useEffect)((function(){ae.a.on("changes",(function(){A((function(e){return e+1}))})),Object(ae.h)(),"no"===localStorage.getItem("isThisNew")&&H(!0),lt=n,t.listen((function(e){"/play"!==e.pathname&&(lt=e,console.log(lt))}))}),[]),Object(c.useEffect)((function(){U&&"/"===t.location.pathname&&t.replace("/home")}),[H,t,U]);var q=function(){localStorage.setItem("isThisNew","no"),t.replace("/home"),mt&&(mt.prompt(),mt.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),mt=null})))};return Object(a.jsxs)("div",{children:[Object(a.jsxs)(c.Suspense,{fallback:W,children:[Object(a.jsxs)(d.c,{location:"/play"===n.pathname?lt:n,children:[Object(a.jsx)(d.a,{exact:!0,path:"/",render:function(e){return Object(a.jsx)(dt,{continueToHome:q})}}),Object(a.jsx)(d.a,{path:"/search",render:function(e){return Object(a.jsx)(pt,{videos:p})}}),Object(a.jsx)(d.a,{path:"/home",render:function(e){return E(0),Object(a.jsx)(bt,{})}}),Object(a.jsx)(d.a,{path:"/liked",render:function(e){return E(1),Object(c.createElement)(jt,Object(j.a)(Object(j.a)({songs:S},e),{},{key:n.pathname}))}}),Object(a.jsx)(d.a,{path:"/downloads",render:function(e){return E(2),Object(a.jsx)(jt,{songs:z},n.pathname)}}),Object(a.jsx)(d.a,{path:"/history",render:function(e){return E(3),Object(a.jsx)(jt,{songs:x},n.pathname)}}),Object(a.jsx)(d.a,{path:"/app",render:function(e){return window.location.replace("https://play.google.com/store/apps/details?id=com.ylightmusic.app"),Object(a.jsx)("div",{children:"Redirecting you to play store"})}}),Object(a.jsx)(d.a,{path:"/settings",component:ue})]}),Object(a.jsx)(d.a,{path:"/",render:function(e){return function(e){return"/"!==window.location.pathname?Object(a.jsx)(ut,Object(j.a)({},e)):null}(e)}}),Object(a.jsx)("div",{style:{height:o.id?"100px":"50px"}})]}),Object(a.jsxs)(ht,{value:R,onChange:function(e,t){E(t)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary",children:[Object(a.jsx)(ft,{icon:Object(a.jsx)(Z.a,{}),"aria-label":"Home",component:u.b,to:"/home",label:"Home"}),Object(a.jsx)(ft,{icon:Object(a.jsx)(ee.a,{}),"aria-label":"Liked",component:u.b,to:"/liked",label:"Liked"}),Object(a.jsx)(ft,{icon:Object(a.jsx)(te.a,{}),"aria-label":"Downloads",component:u.b,to:"/downloads",label:"Downloads"}),Object(a.jsx)(ft,{icon:Object(a.jsx)(ne.a,{}),"aria-label":"History",component:u.b,to:"/history",label:"History"})]})]})})),gt=n(105),xt=n(254),yt=n(79),vt=document.querySelector("body"),wt={palette:{primary:yt.a,secondary:{main:"#000000"}},typography:{useNextVariants:!0}},St={palette:{type:"dark",primary:yt.a,secondary:{main:"#ffffff"}},typography:{useNextVariants:!0}},kt=Object(gt.a)(St),Ct=Object(gt.a)(wt),Tt=function(){var e=Object(c.useContext)(s.a),t=Object(l.a)(e,2),n=t[0].themeSelectValue,r=(t[1],function(){var e=Object(c.useContext)(s.a),t=Object(l.a)(e,2)[1],n=Object(c.useCallback)((function(e){t({type:"setThemeSelectValue",snippet:e})}),[t]);return{checkDarkMode:function(){var e=localStorage.getItem("selectedTheme");if(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){e.matches?n("Dark"):n("Default")})),e){console.log(e),n(e);var t=(new Date).getHours();"Auto"===e&&n(t>=18||t<=6?"Dark":"Default")}}}}().checkDarkMode);return Object(c.useEffect)((function(){r(),navigator.userAgent.match(/Android/i)&&(vt.style.overscrollBehavior="none")}),[]),Object(c.useEffect)((function(){"Dark"===n?vt.classList.add("dark"):vt.classList.remove("dark")}),[n]),Object(a.jsx)(xt.a,{theme:"Dark"===n?kt:Ct,children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)(U,{}),Object(a.jsx)(d.a,{component:Ot}),Object(a.jsx)(_,{})]})})};var zt=function(){return Object(a.jsx)(s.b,{children:Object(a.jsx)(Tt,{})})},It=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Dt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Pt=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,270)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(zt,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");It?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Dt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Dt(t,e)}))}}(),Pt()},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l}));var a=n(16),c=n(2),r=n(0),i=n.n(r).a.createContext(),o={searchState:"home",searchResult:[],relatedVideos:[],menuOpen:!1,snackbarMsg:!1,currentVideoSnippet:{},themeSelectValue:"Default"},s=function(e,t){switch(t.type){case"setCurrentVideoSnippet":return Object(a.a)(Object(a.a)({},e),{},{currentVideoSnippet:t.snippet});case"setRelatedVideos":return Object(a.a)(Object(a.a)({},e),{},{relatedVideos:t.snippet});case"setSnackbarMsg":return Object(a.a)(Object(a.a)({},e),{},{snackbarMsg:t.snippet});case"setThemeSelectValue":return Object(a.a)(Object(a.a)({},e),{},{themeSelectValue:t.snippet});case"setSearchState":return Object(a.a)(Object(a.a)({},e),{},{searchState:t.snippet});case"setSearchResult":return Object(a.a)(Object(a.a)({},e),{},{searchResult:t.snippet});case"setMenuOpen":return Object(a.a)(Object(a.a)({},e),{},{menuOpen:t.snippet});default:return e}},l=function(e){var t=Object(r.useReducer)(s,o);return Object(c.jsx)(i.Provider,{value:t,children:e.children})}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return j})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return b})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return f}));var a=n(8),c=n(11),r=n.n(c),i=n(20),o=n(14),s=(n(153),new o.a("Song_Database"));s.version(1).stores({songs:"&videoId, timestamp, playbackTimes, [rating+timestamp], [downloadState+timestamp]"}),s.version(2).stores({});var l=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={videoId:t.id,timestamp:Date.now(),title:t.title,channelTitle:t.channelTitle,playbackTimes:1},e.next=3,s.songs.get({videoId:t.id});case 3:if(!(a=e.sent)){e.next=10;break}return s.songs.update(t.id,{timestamp:Date.now(),playbackTimes:a.playbackTimes+1}),console.log("song updated"),e.abrupt("return",a.rating);case 10:console.log("song added"),s.songs.add(n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.songs.update(t,{rating:n});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.songs.orderBy("timestamp").limit(500).reverse().toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.songs.where("[rating+timestamp]").between(["liked",o.a.minKey],["liked",o.a.maxKey]).reverse().toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.songs.where("[downloadState+timestamp]").between(["downloaded",o.a.minKey],["downloaded",o.a.maxKey]).reverse().toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.songs.where("[downloadState+timestamp]").between(["downloading",o.a.minKey],["downloading",o.a.maxKey]).modify((function(e){delete e.downloadState}));case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var c,i,o,l,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.songs.update(t,{downloadState:"downloading"}),c="https://i.ytimg.com/vi/".concat(t,"/hqdefault.jpg"),e.next=5,Promise.all([m(c),m(n)]);case 5:return i=e.sent,o=Object(a.a)(i,2),l=o[0],u=o[1],s.songs.update(t,{downloadState:"downloaded",thumbnail:l,audio:u}),e.abrupt("return","downloaded");case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.songs.where({videoId:t}).modify((function(e){delete e.audio,delete e.downloadState}));case 2:return e.abrupt("return","song deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function m(e){var t=e;return new Promise((function(e,n){var a=new XMLHttpRequest;a.open("GET","https://server.ylight.xyz/proxy/"+t),a.responseType="blob",a.onload=function(){var t=a.status;t>=200&&t<300?e(a.response):n({status:t,statusText:a.statusText})},a.send(),setTimeout((function(){a.abort(),a.open("GET","https://server.ylight.xyz/proxy/"+t),a.send()}),1e3)}))}},63:function(e,t,n){"use strict";var a=n(43),c=n.n(a);t.a=c.a.create({baseURL:"https://www.googleapis.com/youtube/v3",params:{part:"snippet",videoCategoryId:"10",type:"video",key:function(){var e="AIzaSyALxfLLsdB5JxV8f5egyyPtwXF_6PxbkC4".split(" ");return e[Math.floor(Math.random()*Math.floor(e.length))]}()}})},69:function(e,t,n){"use strict";var a=n(43),c=n.n(a);t.a=c.a.create({baseURL:"https://server.ylight.xyz"})}},[[156,1,2]]]);
//# sourceMappingURL=main.a4dba882.chunk.js.map